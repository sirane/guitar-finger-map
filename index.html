<!DOCTYPE html>
<html>
  <head>
    <style>
      #fretboard {
        width: 100%;
        height: 100%;
        color: #666;
        border: 1px solid black;
        display: flex;
        flex-direction: row;
        justify-content: flex-start;
      }
      .fret {
        width: max-content;
        border-bottom: 1px solid #666;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
      }
      /* 0fretç›®ã ã‘å³ç·šã‚’å¼·èª¿ */
      .fret:first-child {
        border-right: 3px solid black;
      }
      .string {
        width: 48px;
        height: 30px;
        font-size: 14px;
        border-right: 3px solid #fff;
        border-bottom: 1px solid #ccc;
        /* ç¸¦ã¯ä¸­å¤®ã€æ¨ªã¯å³å¯„ã›ã®flex */
        display: flex;
        flex-direction: row;
        justify-content: flex-end;
        align-items: center;
      }
      .highlight {
        background-color: yellow;
      }
      .dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background-color: black;
        margin: 0 auto;
      }
      note-root {
        width: 20px;
        color: #00f;
        text-align: center;
        font-weight: bold;
        flex-basis: auto;
        margin-right: 5px;
        border-bottom: #00f 3px solid;
      }
      note-3rd {
        width: 20px;
        text-align: center;
        font-weight: bold;
        flex-basis: auto;
        margin-right: 5px;
        border-bottom: #00f 3px solid;
      }
      note-5th {
        width: 20px;
        text-align: center;
        font-weight: bold;
        flex-basis: auto;
        margin-right: 5px;
        border-bottom: #00f 3px solid;
      }
      note-7th {
        width: 20px;
        text-align: center;
        font-weight: bold;
        flex-basis: auto;
        margin-right: 5px;
        border-bottom: #f6f 3px solid;
      }
      note-9th {
        width: 20px;
        text-align: center;
        font-weight: bold;
        flex-basis: auto;
        margin-right: 5px;
        border-bottom: #f6f 3px solid;
      }
      note-11th {
        width: 20px;
        text-align: center;
        font-weight: bold;
        flex-basis: auto;
        margin-right: 5px;
        border-bottom: #f6f 3px solid;
      }

      #button-change-scale {
        width: 90%;
        height: 30px;
        font-size: 20px;
        border: 1px solid #ccc;
        border-radius: 5px;
        color:#fff;
        background-color: #666;
        margin: 0 auto;
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        position:fixed;
        left:0;
      }
    </style>
  </head>
  <body>
    <div id="fretboard">
      <!-- Frets are created here by JavaScript -->
    </div>

    <!-- ãƒ¡ã‚¸ãƒ£ãƒ¼ã‹ãƒã‚¤ãƒŠãƒ¼ã‹åˆ‡ã‚Šæ›¿ãˆã‚‹ãƒœã‚¿ãƒ³ã€‚scaleã‚’æ›´æ–°ã—generateFretBoard()ã‚’å‘¼ã³å‡ºã™ -->
    <button
      id="button-change-scale"
      onclick="
      if (scale === 'major') {
        scale = 'minor';
      } else {
        scale = 'major';
      }
        generateFretBoard();
    "
    >
      Major/Minor
    </button>

    <div style="margin-top:50px">
      <pre>
        idea note
        ã‚³ãƒ¼ãƒ‰é€²è¡Œã‚µãƒ³ãƒ—ãƒ«ã‚‚å‡ºã—ãŸã„ã‹ã‚‚
        ãƒ€ã‚¤ã‚¢ãƒˆãƒ‹ãƒƒã‚¯ãŒã‚ã‹ã‚‹ã¨ã„ã„ã‹ã‚‚
      </pre>
    </div>

    <script>
      // ãƒ¡ã‚¸ãƒ£ãƒ¼ã‹ãƒã‚¤ãƒŠãƒ¼ã‹ã®ã‚¹ã‚±ãƒ¼ãƒ«ã‚’æ ¼ç´ã™ã‚‹
      let scale = "major";
      // ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã•ã‚Œã¦ã„ã‚‹éŸ³åindexã‚’æ ¼ç´ã™ã‚‹ã€‚
      let focusNoteIndex = 0;
      // 12éŸ³åã‚’Aã‹ã‚‰Gã¾ã§é…åˆ—ã«æ ¼ç´ã™ã‚‹ã€‚
      let notes = [
        "A",
        "As",
        "B",
        "C",
        "Cs",
        "D",
        "Ds",
        "E",
        "F",
        "Fs",
        "G",
        "Gs",
      ];
      // 12éŸ³åã”ã¨ã®è‰²ã‚’é…åˆ—ã«æ ¼ç´ã™ã‚‹ã€‚ã‚·ãƒ£ãƒ¼ãƒ—ã‚„ãƒ•ãƒ¬ãƒƒãƒˆã¯çœŸã£ç™½ã§ã€ä»–ã®è‰²ã¯ãã‚Œãã‚Œé•ã£ãŸè–„ã„è‰²ã‚’æ¡ç”¨ã™ã‚‹ã€‚
      let colors = [
        "#ffccbb", // A
        "#ffffff",
        "#ffccdd",
        "#ccffff",
        "#ffffff",
        "#ccddff", // D
        "#ffffff",
        "#ddccff",
        "#bbffdd",
        "#ffffff",
        "#eeffcc", // G
        "#ffffff",
      ];
      // 1å¼¦ã‹ã‚‰6å¼¦ã¾ã§ã®0fretã®éŸ³å ã‚’notesã®indexã§é…åˆ—ã«æ ¼ç´ã™ã‚‹ã€‚
      let openStrings = [7, 2, 10, 5, 0, 7];

      function generateFretBoard() {
        // ã™ã¹ã¦ã®fretã‚’å‰Šé™¤ã™ã‚‹ã€‚
        document.getElementById("fretboard").innerHTML = "";
        // ãƒœã‚¿ãƒ³ã®è¡¨è¨˜ã‚’æ›´æ–°ã™ã‚‹ã€‚
        // ãƒ¡ã‚¸ãƒ£ãƒ¼ãªã‚‰èƒŒæ™¯è‰²ã‚’é»„è‰²ã«ã€ãƒã‚¤ãƒŠãƒ¼ãªã‚‰èƒŒæ™¯è‰²ã‚’é’ã«ã™ã‚‹ã€‚
        if (scale === "major") {
          document.getElementById("button-change-scale").style.backgroundColor =
            "#880";
          document.getElementById("button-change-scale").innerHTML = "ãƒ¡ã‚¸ãƒ£ãƒ¼ğŸ˜Š";
        } else {
          document.getElementById("button-change-scale").style.backgroundColor =
            "#27a";
          document.getElementById("button-change-scale").innerHTML = "ãƒã‚¤ãƒŠãƒ¼ğŸŒ";
        }
        // Create 22 fretsã€‚ ã“ã‚Œã‚‰ã®è¦ç´ ã¯æ¨ªã«ä¸¦ã¶ãŒã€ä¸­èº«ã¯ç¸¦ã«ä¸¦ã¶ã€‚
        for (let i = 0; i < 22; i++) {
          let fret = document.createElement("div");
          fret.id = "fret" + i;
          fret.className = "fret";
          // ç¸¦ã«ä¸¦ã¶ 6å¼¦åˆ†ã® div è¦ç´ ã‚’ä½œæˆã™ã‚‹ã€‚
          for (let j = 0; j < 6; j++) {
            let string = document.createElement("div");
            string.id = "string" + j;
            string.className = "string";
            // 6å¼¦ã‹ã‚‰1å¼¦ã¾ã§ã®"j"fretã®éŸ³åã‚’notesã®indexã§é…åˆ—ã«æ ¼ç´ã™ã‚‹
            let note_index = (openStrings[j] + i) % notes.length;
            // noteã«åˆã‚ã›ãŸèƒŒæ™¯è‰²ã‚’è¨­å®š
            string.style.backgroundColor = colors[note_index];
            // focusNoteIndexã‹ã‚‰ã®ç›¸å¯¾åº¦æ•°ã‚’è¡¨ç¤ºã™ã‚‹ã€‚çŸ­3åº¦,é•·ä¸‰åº¦,å®Œå…¨4åº¦,å¢—4åº¦,å®Œå…¨5åº¦,çŸ­7åº¦,é•·7åº¦ã«ã¯m3,M3,P4,A4,P5,m7,M7ã‚’è¡¨ç¤ºã™ã‚‹
            let relativeNoteIndex =
              (note_index - focusNoteIndex + notes.length) % notes.length;
            if (relativeNoteIndex === 0) {
              note = "<note-root>R</note-root>";
            } else if (relativeNoteIndex === 1) {
              note = "<note-9th>m9</note-9th>";
            } else if (relativeNoteIndex === 2) {
              note = "<note-9th>M9</note-9th>";
            } else if (relativeNoteIndex === 3) {
              note = "<note-3rd>m3</note-3rd>";
            } else if (relativeNoteIndex === 4) {
              note = "<note-3rd>M3</note-3rd>";
            } else if (relativeNoteIndex === 5) {
              note = "<note-11th>11</note-11th>";
            } else if (relativeNoteIndex === 6) {
              note = "";
            } else if (relativeNoteIndex === 7) {
              note = "<note-5th>5</note-5th>";
            } else if (relativeNoteIndex === 8) {
              note = "";
            } else if (relativeNoteIndex === 9) {
              note = "";
            } else if (relativeNoteIndex === 10) {
              note = "<note-7th>m7</note-7th>";
            } else if (relativeNoteIndex === 11) {
              note = "<note-7th>M7</note-7th>";
            }
            // ãŸã ã—ã€j=5ã®å ´åˆã¯relativeNoteIndex=0ä»¥å¤–ã¯è¡¨ç¤ºã—ãªã„ã€‚
            if (j === 5 && relativeNoteIndex !== 0) {
              note = "";
            }
            string.innerHTML = `${note} ${notes[note_index]}`;

            // scaleãŒmajorã®å ´åˆã€relativeNoteIndexã‹ã‚‰ã®ç›¸å¯¾åº¦æ•°ã§è¦‹ãŸç›®ã‚’focusã€‚
            if (scale === "major") {
              const majorNoteIndexIndices_penta = [0, 2, 4, 7, 9];
              const majorNoteIndexIndices = [5, 11];
              if (majorNoteIndexIndices_penta.includes(relativeNoteIndex)) {
                string.style.borderRight = "3px solid #0af";
              } else if (majorNoteIndexIndices.includes(relativeNoteIndex)) {
                string.style.borderRight = "3px #0af dashed";
              }
            }
            // scaleãŒminorã®å ´åˆã€relativeNoteIndexã‹ã‚‰ã®ç›¸å¯¾åº¦æ•°ã§è¦‹ãŸç›®ã‚’focusã€‚
            if (scale === "minor") {
              const minorNoteIndexIndices_penta = [0, 3, 5, 7, 10];
              const minorNoteIndexIndices = [2, 8];
              if (minorNoteIndexIndices_penta.includes(relativeNoteIndex)) {
                string.style.borderRight = "3px solid #0af";
              } else if (minorNoteIndexIndices.includes(relativeNoteIndex)) {
                string.style.borderRight = "3px #0af dashed";
              }
            }
            document.getElementById("fretboard").appendChild(fret);
            fret.appendChild(string);
            // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¿½åŠ ã™ã‚‹ã€‚
            string.addEventListener("click", function () {
              // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸéŸ³åindexã‚’focusNoteIndexã«æ ¼ç´ã™ã‚‹ã€‚
              focusNoteIndex = note_index;
              // ã™ã¹ã¦ã®fretã‚’å‰Šé™¤ã™ã‚‹ã€‚
              document.getElementById("fretboard").innerHTML = "";
              // fretã‚’å†ç”Ÿæˆã™ã‚‹ã€‚
              generateFretBoard();
            });
          }
          // 3,5,7,9,12,15,17,19,21ãƒ•ãƒ¬ãƒƒãƒˆã«ç‚¹ã‚’è¡¨ç¤ºã™ã‚‹ã€‚
          if (
            i === 3 ||
            i === 5 ||
            i === 7 ||
            i === 9 ||
            i === 12 ||
            i === 15 ||
            i === 17 ||
            i === 19 ||
            i === 21
          ) {
            let dot = document.createElement("div");
            dot.className = "dot";
            fret.appendChild(dot);
          } else {
            let dot = document.createElement("div");
            dot.className = "dot";
            fret.appendChild(dot);
            dot.style.visibility = "hidden";
          }
        }

        // Function to highlight frets
        function highlightFrets() {
          // Change the range as per your requirement
          for (let i = 5; i < 10; i++) {
            document.getElementById("fret" + i).classList.add("highlight");
          }
        }
      }
      generateFretBoard();
    </script>
  </body>
</html>
